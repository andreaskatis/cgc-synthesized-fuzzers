#include "agameofchance.h"
#include <stdlib.h>
#include <unistd.h>
#include <sys/syscall.h>

typedef struct msg {
	int command;
	int size;
	int deck[256];
} msg_t;

extern int generateRandomValue(_Bool lflag, _Bool uflag, int lbound, int ubound) {
	int min = lflag ? lbound : lbound + 1;
	int max = uflag ? ubound : ubound - 1;
	int range = max - min + 1;
        int s;
        syscall(SYS_getrandom, &s, sizeof(int), 1);
	double rnd = ((double) rand()) / (1.0 + ((double) RAND_MAX));
        if (rnd < 0) rnd = rnd * -1;
	int value = ((int) (((double) range) * rnd));
	return value + min;
}

msg_t step() {
	updateFunction();
	msg_t msg;
	msg.command    = option[0];
	msg.size       = deck_size[0];
	msg.deck[0]    = c1[0];
	msg.deck[1]    = c2[0];
	msg.deck[2]    = c3[0];
	msg.deck[3]    = c4[0];
	msg.deck[4]    = c5[0];
	msg.deck[5]    = c6[0];
	msg.deck[6]    = c7[0];
	msg.deck[7]    = c8[0];
	msg.deck[8]    = c9[0];
	msg.deck[9]    = c10[0];
	msg.deck[10]   = c11[0];
	msg.deck[11]   = c12[0];
	msg.deck[12]   = c13[0];
	msg.deck[13]   = c14[0];
	msg.deck[14]   = c15[0];
	msg.deck[15]   = c16[0];
	msg.deck[16]   = c17[0];
	msg.deck[17]   = c18[0];
	msg.deck[18]   = c19[0];
	msg.deck[19]   = c20[0];
	msg.deck[20]   = c21[0];
	msg.deck[21]   = c22[0];
	msg.deck[22]   = c23[0];
	msg.deck[23]   = c24[0];
	msg.deck[24]   = c25[0];
	msg.deck[25]   = c26[0];
	msg.deck[26]   = c27[0];
	msg.deck[27]   = c28[0];
	msg.deck[28]   = c29[0];
	msg.deck[29]   = c30[0];
	msg.deck[30]   = c31[0];
	msg.deck[31]   = c32[0];
	msg.deck[32]   = c33[0];
	msg.deck[33]   = c34[0];
	msg.deck[34]   = c35[0];
	msg.deck[35]   = c36[0];
	msg.deck[36]   = c37[0];
	msg.deck[37]   = c38[0];
	msg.deck[38]   = c39[0];
	msg.deck[39]   = c40[0];
	msg.deck[40]   = c41[0];
	msg.deck[41]   = c42[0];
	msg.deck[42]   = c43[0];
	msg.deck[43]   = c44[0];
	msg.deck[44]   = c45[0];
	msg.deck[45]   = c46[0];
	msg.deck[46]   = c47[0];
	msg.deck[47]   = c48[0];
	msg.deck[48]   = c49[0];
	msg.deck[49]   = c50[0];
	msg.deck[50]   = c51[0];
	msg.deck[51]   = c52[0];
	msg.deck[52]   = c53[0];
	msg.deck[53]   = c54[0];
	msg.deck[54]   = c55[0];
	msg.deck[55]   = c56[0];
	msg.deck[56]   = c57[0];
	msg.deck[57]   = c58[0];
	msg.deck[58]   = c59[0];
	msg.deck[59]   = c60[0];
	msg.deck[60]   = c61[0];
	msg.deck[61]   = c62[0];
	msg.deck[62]   = c63[0];
	msg.deck[63]   = c64[0];
	msg.deck[64]   = c65[0];
	msg.deck[65]   = c66[0];
	msg.deck[66]   = c67[0];
	msg.deck[67]   = c68[0];
	msg.deck[68]   = c69[0];
	msg.deck[69]   = c70[0];
	msg.deck[70]   = c71[0];
	msg.deck[71]   = c72[0];
	msg.deck[72]   = c73[0];
	msg.deck[73]   = c74[0];
	msg.deck[74]   = c75[0];
	msg.deck[75]   = c76[0];
	msg.deck[76]   = c77[0];
	msg.deck[77]   = c78[0];
	msg.deck[78]   = c79[0];
	msg.deck[79]   = c80[0];
	msg.deck[80]   = c81[0];
	msg.deck[81]   = c82[0];
	msg.deck[82]   = c83[0];
	msg.deck[83]   = c84[0];
	msg.deck[84]   = c85[0];
	msg.deck[85]   = c86[0];
	msg.deck[86]   = c87[0];
	msg.deck[87]   = c88[0];
	msg.deck[88]   = c89[0];
	msg.deck[89]   = c90[0];
	msg.deck[90]   = c91[0];
	msg.deck[91]   = c92[0];
	msg.deck[92]   = c93[0];
	msg.deck[93]   = c94[0];
	msg.deck[94]   = c95[0];
	msg.deck[95]   = c96[0];
	msg.deck[96]   = c97[0];
	msg.deck[97]   = c98[0];
	msg.deck[98]   = c99[0];
	msg.deck[99]   = c100[0];
	msg.deck[100]  = c101[0];
	msg.deck[101]  = c102[0];
	msg.deck[102]  = c103[0];
	msg.deck[103]  = c104[0];
	msg.deck[104]  = c105[0];
	msg.deck[105]  = c106[0];
	msg.deck[106]  = c107[0];
	msg.deck[107]  = c108[0];
	msg.deck[108]  = c109[0];
	msg.deck[109]  = c110[0];
	msg.deck[110]  = c111[0];
	msg.deck[111]  = c112[0];
	msg.deck[112]  = c113[0];
	msg.deck[113]  = c114[0];
	msg.deck[114]  = c115[0];
	msg.deck[115]  = c116[0];
	msg.deck[116]  = c117[0];
	msg.deck[117]  = c118[0];
	msg.deck[118]  = c119[0];
	msg.deck[119]  = c120[0];
	msg.deck[120]  = c121[0];
	msg.deck[121]  = c122[0];
	msg.deck[122]  = c123[0];
	msg.deck[123]  = c124[0];
	msg.deck[124]  = c125[0];
	msg.deck[125]  = c126[0];
	msg.deck[126]  = c127[0];
	msg.deck[127]  = c128[0];
	msg.deck[128]  = c129[0];
	msg.deck[129]  = c130[0];
	msg.deck[130]  = c131[0];
	msg.deck[131]  = c132[0];
	msg.deck[132]  = c133[0];
	msg.deck[133]  = c134[0];
	msg.deck[134]  = c135[0];
	msg.deck[135]  = c136[0];
	msg.deck[136]  = c137[0];
	msg.deck[137]  = c138[0];
	msg.deck[138]  = c139[0];
	msg.deck[139]  = c140[0];
	msg.deck[140]  = c141[0];
	msg.deck[141]  = c142[0];
	msg.deck[142]  = c143[0];
	msg.deck[143]  = c144[0];
	msg.deck[144]  = c145[0];
	msg.deck[145]  = c146[0];
	msg.deck[146]  = c147[0];
	msg.deck[147]  = c148[0];
	msg.deck[148]  = c149[0];
	msg.deck[149]  = c150[0];
	msg.deck[150]  = c151[0];
	msg.deck[151]  = c152[0];
	msg.deck[152]  = c153[0];
	msg.deck[153]  = c154[0];
	msg.deck[154]  = c155[0];
	msg.deck[155]  = c156[0];
	msg.deck[156]  = c157[0];
	msg.deck[157]  = c158[0];
	msg.deck[158]  = c159[0];
	msg.deck[159]  = c160[0];
	msg.deck[160]  = c161[0];
	msg.deck[161]  = c162[0];
	msg.deck[162]  = c163[0];
	msg.deck[163]  = c164[0];
	msg.deck[164]  = c165[0];
	msg.deck[165]  = c166[0];
	msg.deck[166]  = c167[0];
	msg.deck[167]  = c168[0];
	msg.deck[168]  = c169[0];
	msg.deck[169]  = c170[0];
	msg.deck[170]  = c171[0];
	msg.deck[171]  = c172[0];
	msg.deck[172]  = c173[0];
	msg.deck[173]  = c174[0];
	msg.deck[174]  = c175[0];
	msg.deck[175]  = c176[0];
	msg.deck[176]  = c177[0];
	msg.deck[177]  = c178[0];
	msg.deck[178]  = c179[0];
	msg.deck[179]  = c180[0];
	msg.deck[180]  = c181[0];
	msg.deck[181]  = c182[0];
	msg.deck[182]  = c183[0];
	msg.deck[183]  = c184[0];
	msg.deck[184]  = c185[0];
	msg.deck[185]  = c186[0];
	msg.deck[186]  = c187[0];
	msg.deck[187]  = c188[0];
	msg.deck[188]  = c189[0];
	msg.deck[189]  = c190[0];
	msg.deck[190]  = c191[0];
	msg.deck[191]  = c192[0];
	msg.deck[192]  = c193[0];
	msg.deck[193]  = c194[0];
	msg.deck[194]  = c195[0];
	msg.deck[195]  = c196[0];
	msg.deck[196]  = c197[0];
	msg.deck[197]  = c198[0];
	msg.deck[198]  = c199[0];
	msg.deck[199]  = c200[0];
	msg.deck[200]  = c201[0];
	msg.deck[201]  = c202[0];
	msg.deck[202]  = c203[0];
	msg.deck[203]  = c204[0];
	msg.deck[204]  = c205[0];
	msg.deck[205]  = c206[0];
	msg.deck[206]  = c207[0];
	msg.deck[207]  = c208[0];
	msg.deck[208]  = c209[0];
	msg.deck[209]  = c210[0];
	msg.deck[210]  = c211[0];
	msg.deck[211]  = c212[0];
	msg.deck[212]  = c213[0];
	msg.deck[213]  = c214[0];
	msg.deck[214]  = c215[0];
	msg.deck[215]  = c216[0];
	msg.deck[216]  = c217[0];
	msg.deck[217]  = c218[0];
	msg.deck[218]  = c219[0];
	msg.deck[219]  = c220[0];
	msg.deck[220]  = c221[0];
	msg.deck[221]  = c222[0];
	msg.deck[222]  = c223[0];
	msg.deck[223]  = c224[0];
	msg.deck[224]  = c225[0];
	msg.deck[225]  = c226[0];
	msg.deck[226]  = c227[0];
	msg.deck[227]  = c228[0];
	msg.deck[228]  = c229[0];
	msg.deck[229]  = c230[0];
	msg.deck[230]  = c231[0];
	msg.deck[231]  = c232[0];
	msg.deck[232]  = c233[0];
	msg.deck[233]  = c234[0];
	msg.deck[234]  = c235[0];
	msg.deck[235]  = c236[0];
	msg.deck[236]  = c237[0];
	msg.deck[237]  = c238[0];
	msg.deck[238]  = c239[0];
	msg.deck[239]  = c240[0];
	msg.deck[240]  = c241[0];
	msg.deck[241]  = c242[0];
	msg.deck[242]  = c243[0];
	msg.deck[243]  = c244[0];
	msg.deck[244]  = c245[0];
	msg.deck[245]  = c246[0];
	msg.deck[246]  = c247[0];
	msg.deck[247]  = c248[0];
	msg.deck[248]  = c249[0];
	msg.deck[249]  = c250[0];
	msg.deck[250]  = c251[0];
	msg.deck[251]  = c252[0];
	msg.deck[252]  = c253[0];
	msg.deck[253]  = c254[0];
	msg.deck[254]  = c255[0];
	msg.deck[255]  = c256[0];
	return msg;
}
